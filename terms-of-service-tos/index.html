<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Terms of Service (TOS) - Donns Domain</title><meta name="robots" content="noindex,nofollow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><meta property="og:title" content="Terms of Service (TOS)"><meta property="og:site_name" content="Donns Domain"><meta property="og:description" content="Terms of Service (TOS) Effective Date: 5/01/2025 Welcome to MissDonn.com ('Website'), operated under the professional name 'Miss Donn' and 'The Foxy Red Donn.' By accessing or using this Website, you agree to these Terms of Service ('Terms'). If you do not agree, please do not&hellip;"><meta property="og:url" content="https://melissadonn.github.io/DonnsDomain/terms-of-service-tos/"><meta property="og:type" content="article"><link rel="stylesheet" href="https://melissadonn.github.io/DonnsDomain/assets/css/style.css?v=ff720b2669c4189f149ef4f8db0bc494"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://melissadonn.github.io/DonnsDomain/terms-of-service-tos/"},"headline":"Terms of Service (TOS)","datePublished":"2025-04-26T11:26-07:00","dateModified":"2025-06-17T10:22-07:00","description":"Terms of Service (TOS) Effective Date: 5/01/2025 Welcome to MissDonn.com ('Website'), operated under the professional name 'Miss Donn' and 'The Foxy Red Donn.' By accessing or using this Website, you agree to these Terms of Service ('Terms'). If you do not agree, please do not&hellip;","author":{"@type":"Person","name":"Miss Donn","url":"https://melissadonn.github.io/DonnsDomain/authors/miss-donn/"},"publisher":{"@type":"Organization","name":"Miss Donn"}}</script><style></style><noscript><style>img[loading]{opacity:1;}</style></noscript><script src="https://cdn.commoninja.com/sdk/latest/commonninja.js" defer="defer"></script><div class="commonninja_component pid-9b9f83f6-a6e4-4322-836f-0773f3b36e57"></div></head><body class="page-template"><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://melissadonn.github.io/DonnsDomain/">Donns Domain</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://melissadonn.github.io/DonnsDomain/in-person-sessions/" target="_self">Session Info</a></li><li><a href="https://melissadonn.github.io/DonnsDomain/contact-miss-donn/" target="_self">Contact</a></li><li><a href="https://melissadonn.github.io/DonnsDomain/gallery/" target="_self">Gallery</a></li><li><a href="https://melissadonn.github.io/DonnsDomain/authors/miss-donn/" target="_self">About Miss Donn</a></li><li><a href="https://melissadonn.github.io/DonnsDomain/resource-links/" target="_self">Resources Links</a></li></ul></nav></div></header><div class="main-content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2025-11-11T21:29">November 11, 2025</time></div></div><main class="main page"><article class="content"><header class="u-header content__header"><h1>Terms of Service (TOS)</h1></header><div class="content__entry u-inner"><p style="margin: 0in; font-family: Calibri; font-size: 20.0pt;"><span style="font-weight: bold;">Terms of Service (TOS)</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"><span style="font-weight: bold;">Effective Date:</span> 5/01/2025</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Welcome to MissDonn.com ("Website"), operated under the professional name "Miss Donn" and "The Foxy Red Donn."</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">By accessing or using this Website, you agree to these Terms of Service ("Terms"). If you do not agree, please do not access or use the Website.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">1. Eligibility</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">This Website is intended only for individuals who are at least the age of majority in their jurisdiction.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">By entering, you affirm that you are legally allowed to view adult content in your jurisdiction and that you are at least 18 years old (or older if required by your local laws).</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">2. Content Warning</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">This Website discusses mature themes, including alternative lifestyles, BDSM, fetish topics, sexual wellness, and other sensitive material.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">All content is for <span style="font-weight: bold;">educational, entertainment, and personal enrichment purposes only</span>.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">The Website does not endorse, condone, or encourage illegal activities.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">3. Personal Responsibility</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">You access and use this Website at your own risk.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Miss Donn provides informational content only and does not guarantee results or outcomes from the information shared.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">4. No Professional Advice</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Nothing on this Website constitutes medical, mental health, or legal advice.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Please consult appropriate licensed professionals if you require such services.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">5. Donations and External Links</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">The Website may reference external services, such as OnlyFans, Patreon, Venmo, or Cash App, for donations and paid content.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">External services have their own terms of service and privacy policies. You are responsible for reviewing them separately.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">6. Intellectual Property Rights</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Unless otherwise stated, all content on the Website ‚Äî including text, graphics, logos, images, audio clips, video, and digital downloads ‚Äî is the intellectual property of Miss Donn and is protected by copyright laws.</p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;"><span style="font-weight: bold;">You may not copy, reproduce, distribute, modify, or create derivative works without prior written consent.</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Unauthorized use may result in legal action.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">7. Prohibited Uses</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">You agree not to:</p><ul style="direction: ltr; unicode-bidi: embed; margin-top: 0in; margin-bottom: 0in;" type="disc"><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><span style="font-family: Calibri; font-size: 11.0pt;">Use the Website for any unlawful purpose;</span></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><span style="font-family: Calibri; font-size: 11.0pt;">Harass, abuse, or harm others;</span></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><span style="font-family: Calibri; font-size: 11.0pt;">Infringe upon intellectual property rights;</span></li><li style="margin-top: 0; margin-bottom: 0; vertical-align: middle;"><span style="font-family: Calibri; font-size: 11.0pt;">Attempt to hack, disrupt, or disable the Website.</span></li></ul><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">8. Disclaimer of Warranties</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">This Website is provided "as is" without warranties of any kind, express or implied.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">9. Limitation of Liability</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">To the fullest extent permitted by law, Miss Donn disclaims any liability for damages arising from your use of the Website.</p><p style="margin: 0in; font-family: Calibri; font-size: 18.0pt;"><span style="font-weight: bold;">10. Changes to Terms</span></p><p style="margin: 0in; font-family: Calibri; font-size: 11.0pt;">Miss Donn may update these Terms from time to time. Changes will be posted with a new effective date.</p></div></article></main><div class="sidebar"><section class="box u-ads"><h3 class="u-ads__title">Advertisement</h3><div class="custom-substack-cta"><h3>Stay Inspired</h3><p>Join my Substack to receive essays, reflections, and insights on ethical kink, creative play, and self-expression. No spam‚Äîjust authentic thoughts delivered to your inbox.</p><a href="https://Missdonn.substack.com" target="_blank" class="cta-substack-button">Subscribe on Substack</a><p class="subtle-text">Explore more facets of Miss Donn‚Äîplay, philosophy, and reflection await.</p></div></section><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><a href="https://melissadonn.github.io/DonnsDomain/authors/miss-donn/" class="authors__image-link"><img src="https://melissadonn.github.io/DonnsDomain/media/website/potential-shiny-headhsot.jpg" loading="lazy" alt="Miss Donn" height="672" width="538"></a><div><a href="https://melissadonn.github.io/DonnsDomain/authors/miss-donn/" class="authors__title">Miss Donn</a> <span class="u-small">Post: 1</span></div></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://melissadonn.github.io/DonnsDomain/">Donns Domain</a><nav><ul class="footer__nav"><li class="footer__nav-item"><a href="https://melissadonn.github.io/DonnsDomain/formality-texts/" target="_self">Formality Texts</a></li></ul></nav><div class="footer__copyright"><div style="text-align: center; margin: 30px 0;"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdX5BbSMjml0B_tLhC8qAj4x83AU2tA_cztVUUfiXbxqkDEXg/viewform?usp=header" style="background: linear-gradient(135deg, #007f5f, #2a9d8f); color: #fff; font-family: 'Georgia', serif; font-size: 1.3em; font-weight: bold; padding: 15px 35px; border-radius: 50px; text-decoration: none; box-shadow: 0 6px 18px rgba(0,0,0,0.15); transition: all 0.3s ease; display: inline-block;" onmouseover="this.style.transform='scale(1.08)'; this.style.boxShadow='0 10px 22px rgba(0,0,0,0.25)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 18px rgba(0,0,0,0.15)';">Inquire / Book a Session</a></div><p>¬© 2025 Miss Donn. All rights reserved. | By using this site, you agree to the Terms of Service, Privacy Policy, and Disclaimer.</p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'overlay',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://melissadonn.github.io/DonnsDomain/assets/js/scripts.min.js?v=18a65c58aef57c0287e0f0609f3389a9"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><footer><style>footer {
      text-align: center;
      margin: 2em 0;
    }

    .social-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1em;
    }

    .social-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 5vw;        /* width relative to viewport */
      height: 5vw;       /* height relative to viewport */
      max-width: 60px;   /* prevents being too large on big screens */
      max-height: 60px;
      min-width: 35px;   /* prevents being too small on tiny screens */
      min-height: 35px;
      border-radius: 50%;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .social-btn img {
      width: 50%;        /* icon fills half of the circle */
      height: 50%;
      object-fit: contain;
      filter: brightness(0) invert(1);
    }

    .social-btn:hover {
      transform: scale(1.1);
      opacity: 0.85;
    }

    /* Brand colors */
    .instagram { background-color: #E1306C; }
    .fetlife { background-color: #990100; }
    .twitter { background-color: #1DA1F2; }
    .bluesky { background-color: #0285FF; }
    .tiktok { background-color: #000000; }
    .substack { background-color: #FF6719; }
    .throne { background-color: #6C5CE7; }
    .onlyfans { background-color: #00AFF0; }
    .fansly { background-color: #1DA1F2; }
    .pornhub { background-color: #FF9900; }
    .youtube { background-color: #FF0000; }</style><div class="social-links"><a href="https://www.instagram.com/the.missdonn" target="_blank" class="social-btn instagram"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram"> </a><a href="https://fetlife.com/users/missdonn" target="_blank" class="social-btn fetlife"><img src="https://www.svgrepo.com/show/516267/fetlife.svg" alt="FetLife"> </a><a href="https://twitter.com/themissdonn" target="_blank" class="social-btn twitter"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg" alt="Twitter"> </a><a href="https://bsky.app/profile/missdonn.com" target="_blank" class="social-btn bluesky"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/bluesky.svg" alt="Bluesky"> </a><a href="https://www.tiktok.com/@themissdonn" target="_blank" class="social-btn tiktok"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" alt="TikTok"> </a><a href="https://missdonn.substack.com" target="_blank" class="social-btn substack"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/substack.svg" alt="Substack"> </a><a href="https://throne.me/u/foxyreddonn" target="_blank" class="social-btn throne"><img src="https://upload.wikimedia.org/wikipedia/commons/9/92/Throne_Icon_-_Single_%28Gradient%29.png" alt="Throne"> </a><a href="https://onlyfans.com/MissDonn" target="_blank" class="social-btn onlyfans"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/onlyfans.svg" alt="OnlyFans"> </a><a href="https://fansly.com/foxyreddonn" target="_blank" class="social-btn fansly"><img src="https://upload.wikimedia.org/wikipedia/commons/0/0f/Fansly_logo.svg" alt="Fansly"> </a><a href="https://pornhub.com/users/thefoxyred" target="_blank" class="social-btn pornhub"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/firefox.svg" alt="Pornhub"> </a><a href="https://www.youtube.com/@the.missdonn" target="_blank" class="social-btn youtube"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg" alt="YouTube"></a></div></footer><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner pcb__banner--bar"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">Website Cookies and Policies</div><div id="pcb-txt" class="pcb__txt">This website may have limited cookies from third-party services, such as GitHub and Squarespace, for back-end functionality. The website itself does not have integrated data collection of any sort outside of a newsletter sign-up, which you may choose to opt into at a later time. <a href="https://melissadonn.github.io/DonnsDomain/formality-texts/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept</button></div></div></div><button class="pcb__badge" aria-label="Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>